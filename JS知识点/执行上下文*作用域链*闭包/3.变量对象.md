## 变量对象

### 创建执行上下文，都有三个重要属性
1. 变量对象（VO）
2. 作用域链
3. this

### 变量对象

1. 变量对象是与执行上下文相关的数据作用域，存储了在上下文中定义的变量和函数声明。
2. 不同执行上下文中的变量对象稍有不同。

#### 全局上下文（全局对象 GO）

- 全局对象是预定义对象，作为JavaScript的全局函数和全局属性的占位符。通过她可以访问到其他所有预定义的对象，函数和属性。

1. 可以通过 this 引用，在客户端 JavaScript 中，全局对象就是 Window 对象。

2. 全局对象是由 Object 构造函数实例化的一个对象。(this instanceof Object)

3. 预定义了一堆，嗯，一大堆函数和属性。这种情况this可以省略
```js
console.log(Math.random());
console.log(this.Math.random());
```
4. 作为全局变量的宿主。

5. 客户端 JavaScript 中，全局对象有 window 属性指向自身

#### 函数上下文(活动对象 AO)

- 活动对象（AO）表示变量对象
- 只有到当进入一个执行上下文中，这个执行上下文的变量对象才会被激活。
- 只有被激活的变量对象，也就是活动对象上的各种属性才能被访问。
- 活动对象是在进入函数上下文时刻被创建的，它通过函数的 arguments 属性初始化

### 执行过程
1. 分析
2. 执行

> 分析 预编译：

```txt
1、 检查通篇的语法错误；
1.5、 预编译的过程；
     函数声明整体提升；变量只有声明提升，赋值不会提升；
     (1) 在执行之前的过程是预编译; 
     (2) 先产生全局域GO，全局域按照GO的执行顺序进行; 
     (3) 函数执行会产生一个AO的域，按照AO的执行顺序进行; 
2、 逐行解释执行；
```

>  AO 创建活动对象
```txt
1. 步骤一：寻找函数的形参和变量声明
2. 步骤二：实参的参数值赋值给形参
3. 步骤三：寻找函数的声明赋值给函数体
4. 步骤四：执行
```

>  GO 全局活动对象 window
```txt
1. 步骤一：寻找变量
2. 步骤二：找函数的声明
3. 步骤三：执行
```

- 练习
```js
function foo(a) {
  var b = 2;
  function c() {}
  var d = function() {};

  b = 3;

}

foo(1);
/*
AO:
   a: undefined
   b: undefined
   d: undefined
-----------------
   a: 1
------------------
   c: function c() {}
----------------
   a: 1
   b: 2
   c: function c() {}
   d: function d
*/
```